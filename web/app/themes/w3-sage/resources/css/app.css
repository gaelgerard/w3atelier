@import "tailwindcss";

@variant dark (&:where(.dark, .dark *));

/* Optionnel si besoin de customisation */
@layer theme {
  :root {
/* Ajusté pour le contraste sur fond blanc/clair */
    /* Ancien .746 -> Nouveau .55 (mieux pour le texte secondaire) */
    --color-primary-400: oklch(.55 .16 232.661); 
    
    /* Ancien .685 -> Nouveau .48 (Limite WCAG AA pour texte normal) */
    --color-primary-500: oklch(.48 .169 237.323);
    
    /* Ancien .588 -> Nouveau .40 (Parfait pour les liens et tags) */
    --color-primary-600: oklch(.40 .158 241.966);
    
    /* Pour le texte très important ou survolé */
    --color-primary-700: oklch(.32 .134 242.749);
    --scrollbar: #888;
    --highlight-bg: #f5f5f5;
    --highlight-color: #333;
    --ff-mono: 'Courier New', monospace;
    --fs-body1: 0.9rem;
    --lh-md: 1.5;
    --br-md: 4px;
    --su12: 12px;
    /* Échelle d'accentuation corrigée */
    --accent-50: #f0f9ff;
    --accent-100: #e0f2fe;
    --accent-200: #bae6fd;
    --accent-300: #7dd3fc;
    --accent-400: #0ea5e9; /* L'ancien 500 descend d'un cran, car trop clair pour du texte */
    
    /* NOUVEAU STANDARD POUR LE TEXTE / BOUTONS */
    --accent-500: #0284c7; /* Ratio ~4.6:1 -> PASSE (WCAG AA) */
    --accent-600: #0369a1; /* Ratio ~6.5:1 -> EXCELLENT */
    --accent-700: #075985;
    --accent-800: #0c4a6e;
    --accent-900: #082f49;
    --background-color: var(--color-zinc-50);
    --hover-background-color: var(--color-zinc-100);
    --border-color: #444;
  }
  @media (prefers-color-scheme: dark) {
    :root.dark {
      --background-color: #1a1a1a;
      --hover-background-color: #2a2a2a;
      --hover-border-color: #ffffff;
      --label-color: #e5e7eb; /* Plus proche du blanc pour le contraste sombre */
      /* Si vous utilisez vos variables primary en dark mode, 
         il faudrait idéalement les ré-inverser (les rendre plus claires) */
      --color-primary-500: oklch(.75 .15 237.323);
    }
  }

}


@layer base {
  .banner {
    .custom-logo-link {
      display: flex;
      img {
        max-height: 44px;
        width: auto;
        margin: auto;
      }
    }
  }
  #back-to-top {
    transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
  }
  .text-primary-400 {
    color: var(--color-primary-400);
  }
  .text-primary-500 {
    color: var(--color-primary-500);
  }
  .dark .has-very-light-gray-background-color {
    color: var(--color-gray-950);
  }
  /* On applique la transition sur l'élément racine et ses descendants */
  html {
    /* On prépare la transition pour les changements de thème */
    color-scheme: light dark;
  }

  /* On utilise une classe utilitaire pour éviter d'animer tout, tout le temps (performance) */
  .theme-toggling,
  .theme-toggling *,
  .theme-toggling *:before,
  .theme-toggling *:after {
    transition: all 400ms ease !important;
    transition-delay: 0s !important;
  }

  a.no-underline,
  h2 a,
  header :not(#breadcrumbs) a {
    text-decoration: none !important;
  }

  header p#breadcrumbs {
    font-family: var(--ff-mono);
    font-size: var(--fs-body1);
    margin-top: 1.25em;
    a {
      text-decoration: underline !important;
    }
  }

  .nav-primary ul li a {
    @apply block py-2 md:py-0;
  }

  .prose :where(p):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    margin-top: 1.25em;
    margin-bottom: 1.25em;
  }

  .prose :where(.prose > :first-child):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    margin-top: 0;
  }

  .wp-block-separator:not(.is-style-wide):not(.is-style-dots) {
    width: 100px;
  }

  .wp-block-separator {
    border: none;
    border-bottom: 2px solid;
    margin-left: auto;
    margin-right: auto;
  }

  .prose :where(h1, h2, h3) {
    letter-spacing: var(--tracking-tight);
    font-weight: 700;
  }

  .prose :where(h2):not(:where([class~="not-prose"], [class~="not-prose"] *)):not(:first-child) {
    margin-top: 2em;
  }

  .prose :where(h2):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--tw-prose-headings);
    margin-bottom: 1em;
    font-size: 1.5em;
    font-weight: 700;
    line-height: 1.33333;
  }

  .prose :where(h3):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--tw-prose-headings);
    margin-top: 2em;
    margin-bottom: 1em;
    font-size: 1.3em;
    font-weight: 700;
    line-height: 1.1111;
  }

  .prose li {
    list-style-type: disc;
    list-style-position: inside;
    line-height: 1.7rem;
  }

  pre.editor {
    scrollbar-color: var(--scrollbar) transparent;
    background-color: var(--highlight-bg);
    border-radius: var(--br-md);
    color: var(--highlight-color);
    font-family: var(--ff-mono);
    font-size: var(--fs-body1);
    line-height: var(--lh-md);
    margin: 0;
    margin-top: 0px;
    margin-bottom: 0px;
    overflow: auto;
    padding: var(--su12);
    white-space: pre-wrap;
  }

  .dark pre.editor {
    color: #ffffff;
    background-color: #1d1f21;
  }

  .dark pre.editor .commented {
    color: #c5c8c6;
  }

  pre.editor {
    position: relative;
    padding-top: 30px;
    /* Espace pour le bouton */
  }

  .copy-code-button {
    display: flex;
    position: absolute;
    top: 5px;
    right: 5px;
    background: #eeeeee;
    border: 1px solid #ddd;
    color: var(--color-gray-950);
    padding: 5px 10px;
    font-size: 12px;
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.2s;
  }

  .copy-code-button:hover {
    background: #e0e0e0;
  }

  .copy-code-button.copied {
    background: #4CAF50;
    color: white;
  }

  .copy-code-button.copied {
    background: #4CAF50;
    color: white;
    padding: 5px 12px;
    /* Adjust padding to accommodate the checkmark */
  }

  .post-navigation {
    display: flex;
    margin: 3rem 0;
    padding: 1.5rem 0;

    .nav-links {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;

      .nav-previous,
      .nav-next {
        flex: 1;
        display: flex;
        max-width: 33%;

        a {
          display: flex;
          flex-direction: column;
          padding: 0.75rem 1.25rem;
          color: var(--text-color);
          text-decoration: none !important;
          border: 1px solid var(--border-color);
          border-radius: 8px;
          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          max-width: 300px;
          background-color: var(--background-color);

          &:hover {
            background-color: var(--hover-background-color);
            border-color: var(--hover-border-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
          }

          &::before {
            content: attr(data-label);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--label-color);
            margin-bottom: 0.25rem;
          }
        }
      }

      .nav-next {
        a {
          margin-right: 0;
          margin-left: auto;
        }
      }
    }


    .nav-previous {
      text-align: left;
    }

    .nav-next {
      text-align: right;
    }
  }

  /* Style de base des champs */
  /* Empêcher le débordement sur mobile */
  .input-minimal {
    width: 100% !important;
    /* Force la largeur au conteneur */
    max-width: 100% !important;
    /* Interdit de dépasser */
    box-sizing: border-box !important;
    /* Inclut le padding dans le calcul de la largeur */
    background-color: transparent !important;
    border: none !important;
    padding: 0.75rem 0 !important;
    outline: none !important;
    box-shadow: none !important;
    color: #111827;
    /* Supprime le style par défaut d'iOS sur les inputs */
    -webkit-appearance: none;
    appearance: none;
  }

  /* On s'assure que le conteneur du formulaire ne déborde pas non plus */
  .wpcf7 {
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  /* Correction spécifique pour le textarea */
  textarea.input-minimal {
    resize: vertical;
    /* Empêche l'utilisateur d'étendre le champ horizontalement */
    min-height: 100px;
  }
  .wpcf7-form-control-wrap {
    display: block !important;
    width: 100% !important;
  }
  /* Adaptation Mode Sombre pour les champs */
  .dark .input-minimal {
    color: #f9fafb !important;
    /* gray-50 */
  }

  /* Bouton Envoyer (Brutaliste) */
  .btn-submit {
    width: 100% !important;
    background-color: #030712 !important;
    /* gray-950 */
    color: #f9fafb !important;
    /* gray-100 */
    border: 1px solid #f9fafb !important;
    border-radius: 0 !important;
    /* Pas d'arrondi */
    padding: 1rem 2rem !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.1em !important;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-submit:hover {
    background-color: #ffffff !important;
    color: #030712 !important;
  }
  /*Styles search form*/
  .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .text-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
  }
  
  .search-shadow {
      box-shadow: 0 10px 25px -5px rgba(102, 126, 234, 0.2), 0 10px 10px -5px rgba(102, 126, 234, 0.1);
  }
  
  .card-hover {
      transition: all 0.3s ease;
  }
  
  .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.1);
  }
  .search-highlight {
    @apply bg-yellow-200 text-black px-1 rounded-sm font-bold;
  }
}